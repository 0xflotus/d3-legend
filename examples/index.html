<!DOCTYPE html>
<meta charset="utf-8">
<head>
<link href='http://fonts.googleapis.com/css?family=Cardo:400,700' rel='stylesheet' type='text/css'>
   <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
 <link rel="stylesheet" href="minimal-ui.min.css">
 <link rel="stylesheet" href="prism.css">

<style>
svg {
  padding: 10px 15px;
  margin-bottom: 0px;
}

pre[class*="language-"]{
  margin-top: 0px;
  margin-bottom: 30px;
  border: 1px solid #E4E4E4;
}

:not(pre) > code[class*="language-"], pre[class*="language-"] {
  background: #FFFFFF;
}

.token.function {
  color: #7D66C2;
}

strong {
  color: #272727;
}

text {
  font: 12px sans-serif;
}

.legendSize rect, .legendSize circle{
  fill: rgb(46, 73, 123);
}


.legendSizeHorz circle{
  stroke: rgb(71, 187, 94);
  fill: none;
}

 .legendSizeHorz line {
  stroke: rgb(46, 73, 123);
 }

 .legendPath path {
  fill: rgb(71, 187, 94);
 }

.q0-9 { fill:rgb(247,251,255); }
.q1-9 { fill:rgb(222,235,247); }
.q2-9 { fill:rgb(198,219,239); }
.q3-9 { fill:rgb(158,202,225); }
.q4-9 { fill:rgb(107,174,214); }
.q5-9 { fill:rgb(66,146,198); }
.q6-9 { fill:rgb(33,113,181); }
.q7-9 { fill:rgb(8,81,156); }
.q8-9 { fill:rgb(8,48,107); }


</style>
</head>
<body>
  <header>
    <div class="container">
      <div class="txt-center">
        <h1 class="column12">d3 Legend</h1>
        <div class="column12">
          <p>Tired of making legends for your visualizations? Me too, please enjoy.</p>
          <p>By <a href="http://www.susielu.com">Susie Lu</a></p>
        </div>
        <nav class="column12 nav nav-small">
          <a href="#usage">Usage</a>
          <a href="#color">Color</a>
          <a href="#size">Size</a>
          <a href="#symbol">Symbol</a>
        </nav>
      </div>
    </div>

  </header>


  <section id="usage">
    <div class="container">
      <div class="column8 prefix2">
        <h2>Usage</h2>
        <p>You can simply add the css to your website:</p>
        <ul>
          <li><a href="https://raw.githubusercontent.com/susielu/minimal-ui/master/minimal-ui.min.css">Minified css</a></li>
          <li><a href="https://raw.githubusercontent.com/susielu/minimal-ui/master/minimal-ui.css">Human-readable css</a></li>
        </ul>

        <p><a href="http://sass-lang.com/">Sass</a> users:</p>
        <p>The full sass files are available on <a href="https://github.com/susielu/minimal-ui">github</a>. I am a big fan of <a href="http://gruntjs.com/">Grunt</a>, feel free to refuse the relevant Sass tasks in the repository's <a href="https://github.com/susielu/minimal-ui/blob/master/Gruntfile.js">Gruntfile.js</a>.</p>
      </div>
  </section>

  <section class="bg-light" id="color">
    <div class="container">
      <div class="column8 prefix2">
<h2>Color</h2>

<h3>Documentation</h3>

<p>d3.legend.<strong>color()</strong></p>

<p>Constructs a new color legend. The legend component expects a d3 scale as the basic input, but also has a number of optional parameters for changing the default display such as vertical or horizontal orientation, shape of the symbol next to the label, symbol sizing, and label formatting. See the following documentation for specific functions.</p>

<p>color.<strong>scale(d3.scale)</strong></p>

<p>Creates a new d3 legend based on the scale. The code determines the type of scale and generates the different symbol and label pairs.</p>

<p>color.<strong>cells(number or [numbers])</strong></p>

<p>This parameter is only valid for <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales#quantitative">quantitative scales</a> (minus quantize and quantile). With a linear scale there is no indication from the range for the number of steps in the legend you may want to display. The default number of steps is 5 in equal increments. You can pass the cells function a single number which will create equal increments in those steps, or an array of the <a href="#color-linear-custom">specific steps</a> you want the legend to display.</p>

<p>color.<strong>orient(string)</strong></p>

<p>Accepts "vertical" or "horizontal" for legend orientation. Default set to "vertical."</p>

<p>color.<strong>useClass(boolean)</strong></p>

<p>The default behavior is for the legend to set the fill of the legend's symbols. If you set useClass to <code>true</code> then it will apply the scale's output as classes to the shapes instead of the fill.</p>

<p>color.<strong>shape(string[, path-string])</strong></p>

<p>Accepts "rect", "circle", "line", or "path". If you choose "path," you must also pass a second parameter for the path string, <a href="">an example</a>. Defaults to "rect."</p>

<p>color.<strong>shapeWidth(number)</strong></p>

<p>Only applies to shape of "rect" or "line." Default set to 15px.</p>

<p>color.<strong>shapeHeight(number)</strong></p>

<p>Only applies to shape of "rect." Default set to 15px.</p>

<p>color.<strong>shapeRadius(number)</strong></p>

<p>Only applies to shape of "circle." Default set to 10px.</p>

<p>color.<strong>shapePadding(number)</strong></p>

<p>Applies to all shapes. Determines vertical or horizontal spacing between shapes depending on the respective orient setting. Default set to 2px.</p>

<p>color.<strong>labels([string])</strong></p>

<p>Sets the legend labels to the array of strings passed to the legend. If the array is not the same length as the array the legend calculates, it merges the values and gives the calculated labels for the remaining items, an example.</p>

<p>color.<strong>labelFormat(d3.format)</strong></p>

<p>Takes a <a href="https://github.com/mbostock/d3/wiki/Formatting">d3.format</a> and applies that styling to the legend labels. Default is set to d3.format(".01f")</p>

<p>color.<strong>labelOffset(number)</strong></p>

<p>A value that determines how far the label is from the symbol in each legend item. Default set to 10px.</p>

        <h3>Examples</h3>

        <p>Quantile Scale Legend</p>
        <svg height=200 width=160  id="color-quant"></svg>
        <pre class="column8 left-margin right-margin"><code class="language-javascript">
var quantize = d3.scale.quantize()
  .domain([ 0, 0.15 ])
  .range(d3.range(9).map(function(i) { return "q" + i + "-9"; }));

svg.append("g")
  .attr("class", "legendQuant")
  .attr("transform", "translate(20,20)");

var legend = d3.legend.color()
  .labelFormat(d3.format(".2f"))
  .useClass(true)
  .scale(quantize);

svg.select(".legendQuant")
  .call(legend);
        </code>
        </pre>

        <p>Linear Scale Legend</p>
        <svg height=60 width=200  id="color-linear"></svg>
        <pre class="column8 left-margin right-margin"><code class="language-javascript">
var linear = d3.scale.linear()
  .domain([0,10])
  .range(["rgb(46, 73, 123)", "rgb(71, 187, 94)"]);

var svg = d3.select("#color-linear");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

var legendLinear = d3.legend.color()
    .shapeWidth(30)
    .orient('horizontal')
    .scale(linear);

svg.select(".legendLinear")
  .call(legendLinear);
  </code>
        </pre>

        <p>Linear Scale Legend - 10 cells</p>
        <svg height=60 width=360  id="color-linear-10"></svg>
        <pre class="column8 left-margin right-margin"><code class="language-javascript">
var linear = d3.scale.linear()
  .domain([0,10])
  .range(["rgb(46, 73, 123)", "rgb(71, 187, 94)"]);

var svg = d3.select("#color-linear");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

var legendLinear = d3.legend.color()
    .shapeWidth(30)
    .cells(10)
    .orient('horizontal')
    .scale(linear);

svg.select(".legendLinear")
  .call(legendLinear);
        </code>
        </pre>

        <p>Linear Scale Legend - Custom cells</p>
        <svg height=60 width=200  id="color-linear-custom"></svg>
        <pre class="column8 left-margin right-margin"><code class="language-javascript">
var linear = d3.scale.linear()
  .domain([0,10])
  .range(["rgb(46, 73, 123)", "rgb(71, 187, 94)"]);

var svg = d3.select("#color-linear");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

var legendLinear = d3.legend.color()
    .shapeWidth(30)
    .cells([1, 2, 3, 6, 8])
    .orient('horizontal')
    .scale(linear);

svg.select(".legendLinear")
  .call(legendLinear);
        </code>
        </pre>

        <p>Ordinal Scale Legend</p>
        <svg height=150 width=70  id="color-ordinal"></svg>
        <pre class="column8 left-margin right-margin"><code class="language-javascript">
var ordinal = d3.scale.ordinal()
  .domain(["a", "b", "c", "d", "e"])
  .range([ "rgb(153, 107, 195)", "rgb(56, 106, 197)", "rgb(93, 199, 76)", "rgb(223, 199, 31)", "rgb(234, 118, 47)"]);

svg = d3.select("#color-ordinal");

svg.append("g")
  .attr("class", "legendOrdinal")
  .attr("transform", "translate(20,20)");

var legendOrdinal = d3.legend.color()
  //d3 symbol creates a path-string, for example
  //"M0,-8.059274488676564L9.306048591020996,
  //8.059274488676564 -9.306048591020996,8.059274488676564Z"
  .shape("path", d3.svg.symbol().type("triangle-up").size(150)())
  .shapePadding(10)
  .scale(ordinal);

svg.select(".legendOrdinal")
  .call(legendOrdinal);
        </code>
        </pre>

      </div>
  </section>

  <section id="color">
    <div class="container">
      <div class="column8 prefix2">
       <h2>Size</h2>

       <h3>Documentation</h3>

       <p>d3.legend.<strong>size()</strong></p>

       <p>size.<strong>scale(d3.scale)</strong></p>

       <p>Creates a new d3 legend based on the scale. The code determines the type of scale and generates the different symbol and label pairs.</p>

       <p>size.<strong>cells(number or [numbers])</strong></p>

       <p>This parameter is only valid for <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales#quantitative">quantitative scales</a> (minus quantize and quantile). With a linear scale there is no indication from the range for the number of steps in the legend you may want to display. The default number of steps is 5 in equal increments. You can pass the cells function a single number which will create equal increments in those steps, or an array of the <a href="#color-linear-custom">specific steps</a> you want the legend to display.</p>

       <p>size.<strong>shape(string[, path-string])</strong></p>

       <p>Accepts "rect", "circle", "line", or "path". If you choose "path," you must also pass a second parameter for the path string, <a href="">an example</a>. Defaults to "rect."</p>

       <p>size.<strong>shapePadding(number)</strong></p>

       <p>Applies to all shapes. Determines vertical or horizontal spacing between shapes depending on the respective orient setting. Default set to 2px.</p>

       <p>size.<strong>labels([string])</strong></p>

       <p>Sets the legend labels to the array of strings passed to the legend. If the array is not the same length as the array the legend calculates, it merges the values and gives the calculated labels for the remaining items, an example.</p>

       <p>size.<strong>labelFormat(d3.format)</strong></p>

       <p>Takes a <a href="https://github.com/mbostock/d3/wiki/Formatting">d3.format</a> and applies that styling to the legend labels. Default is set to d3.format(".01f")</p>

       <p>size.<strong>labelOffset(number)</strong></p>

       <p>A value that determines how far the label is from the symbol in each legend item. Default set to 10px.</p>

       <h3>Examples</h3>

      </div>
    </div>
  </section>

  <section class="bg-light" id="symbol">
    <div class="container">
      <div class="column8 prefix2">
        <h2>Symbol</h2>

        <h3>Documentation</h3>

        <p>d3.legend.<strong>symbol()</strong></p>

        <p>Creates a new d3 legend based on the scale. The code determines the type of scale and generates the different symbol and label pairs.</p>

        <p>symbol.<strong>scale()</strong></p>

        <p>Creates a new d3 legend based on the scale. The code determines the type of scale and generates the different symbol and label pairs.</p>

        <p>symbol.<strong>cells()</strong></p>

        <p>This parameter is only valid for <a href="https://github.com/mbostock/d3/wiki/Quantitative-Scales#quantitative">quantitative scales</a> (minus quantize and quantile). With a linear scale there is no indication from the range for the number of steps in the legend you may want to display. The default number of steps is 5 in equal increments. You can pass the cells function a single number which will create equal increments in those steps, or an array of the <a href="#color-linear-custom">specific steps</a> you want the legend to display.</p>

        <p>symbol.<strong>shapePadding()</strong></p>

        <p>Applies to all shapes. Determines vertical or horizontal spacing between shapes depending on the respective orient setting. Default set to 2px.</p>

        <p>symbol.<strong>labels([string])</strong></p>

        <p>Sets the legend labels to the array of strings passed to the legend. If the array is not the same length as the array the legend calculates, it merges the values and gives the calculated labels for the remaining items, an example.</p>

        <p>symbol.<strong>labelFormat(d3.format)</strong></p>

        <p>Takes a <a href="https://github.com/mbostock/d3/wiki/Formatting">d3.format</a> and applies that styling to the legend labels. Default is set to d3.format(".01f")</p>

        <p>symbol.<strong>labelOffset(number)</strong></p>

        <p>A value that determines how far the label is from the symbol in each legend item. Default set to 10px.</p>

        <h3>Examples</h3>

      </div>
    </div>
  </section>
<script src="prism.js"></script>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="../../d3-legend-all.min.js"></script>
<script>


var svg = d3.select("#color-quant");

//Quantile #color-quant
var quantize = d3.scale.quantize()
    .domain([ 0, 0.15 ])
    .range(d3.range(9).map(function(i) { return "q" + i + "-9"; }));

svg.append("g")
  .attr("class", "legendQuant")
  .attr("transform", "translate(20,20)");

var legend = d3.legend.color()
    .labelFormat(d3.format(".2f"))
    .useClass(true)
   // .shape('circle')
    .scale(quantize);

svg.select(".legendQuant")
  .call(legend);

//Linear #color-linear
var linear = d3.scale.linear().domain([0,10]).range(["rgb(46, 73, 123)", "rgb(71, 187, 94)"]);

svg = d3.select("#color-linear");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

var legendLinear = d3.legend.color()
    .shapeWidth(30)
    .orient('horizontal')
    .scale(linear);

//Linear #color-linear-10
svg.select(".legendLinear")
  .call(legendLinear);

svg = d3.select("#color-linear-10");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

legendLinear.cells(10);

svg.select(".legendLinear")
  .call(legendLinear);

//Linear #color-linear-custom
svg.select(".legendLinear")
  .call(legendLinear);

svg = d3.select("#color-linear-custom");

svg.append("g")
  .attr("class", "legendLinear")
  .attr("transform", "translate(20,20)");

legendLinear.cells([1, 2, 3, 6, 8]);

svg.select(".legendLinear")
  .call(legendLinear);


//Ordinal
//category scales
var ordinal = d3.scale.ordinal()
  .domain(["a", "b", "c", "d", "e"])
  .range([ "rgb(153, 107, 195)", "rgb(56, 106, 197)", "rgb(93, 199, 76)", "rgb(223, 199, 31)", "rgb(234, 118, 47)"]);

svg = d3.select("#color-ordinal");

svg.append("g")
  .attr("class", "legendOrdinal")
  .attr("transform", "translate(20,20)");

var legendOrdinal = d3.legend.color()
  .shape("path", d3.svg.symbol().type("triangle-up").size(150)())
  .shapePadding(10)
  .scale(ordinal);

svg.select(".legendOrdinal")
  .call(legendOrdinal);

var legendLine = d3.legend.color()
      .shapeWidth(35)
    //  .shapeHeight(20)
      .scale(ordinal)
      .shape("line")
      .labels(["this", "is", "a", "legend"])
      .shapePadding(25);

  svg.append("g")
    .attr("class", "legendLine")
    .attr("transform", "translate(140,200)");

  svg.select(".legendLine")
    .call(legendLine);


svg.append("g")
  .attr("class", "legendLinearCircle")
  .attr("transform", "translate(140,90)");

legendLinear.shape("circle")
  .shapePadding(20)
  .labelOffset(5);

  svg.select(".legendLinearCircle")
    .call(legendLinear);

// Linear
// size scale
svg.append("g")
  .attr("class", "legendSize")
  .attr("transform", "translate(250, 280)");

var linearSize = d3.scale.linear().domain([0,10]).range([10, 30]);

var legendSize = d3.legend.size()
    .scale(linearSize)
    .cells(8)
    .shape('circle')
    .labels(["test", "labels"])
   .orient('horizontal');

svg.select(".legendSize")
  .call(legendSize);

svg.append("g")
  .attr("class", "legendSizeHorz")
  .attr("transform", "translate(320, 180)");

var legendSizeLine = d3.legend.size()
      .scale(d3.scale.linear().domain([0,10]).range([2, 10]))
      .shape("line")
      .orient("horizontal")
      .shapeWidth(30)
      .shapePadding(10)
      .useStroke(true);

svg.select(".legendSizeHorz")
  .call(legendSizeLine);

// svg.append("g")
//   .attr("class", "legendSizeOrdinal")

svg.append("g")
  .attr("class", "legendPath")
  .attr("transform", "translate(350, 220)");

var symbolScale =  d3.scale.ordinal()
        .domain(['a','b','c', 'd', 'e'])
        //instantiate this as earlier variables, show the actual d-value in the comment
        .range([d3.svg.symbol().type('triangle-up')(), d3.svg.symbol().type('circle')(), d3.svg.symbol().type('cross')(),
      d3.svg.symbol().type('diamond')(), d3.svg.symbol().type('triangle-down')()] );

var legendPath = d3.legend.symbol()
     .scale(symbolScale)
      .orient("horizontal");

svg.select(".legendPath")
  .call(legendPath);


</script>